<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Comic Translator - Options</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 16px;
    }

    @media (max-width: 768px) {
      html {
        font-size: 14px;
      }
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      -webkit-text-size-adjust: 100%;
    }

    @media (max-width: 768px) {
      body {
        padding: 0;
        background: white;
      }
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    @media (max-width: 768px) {
      .container {
        border-radius: 0;
        box-shadow: none;
      }
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
    }

    @media (max-width: 768px) {
      .header {
        padding: 15px;
      }
    }

    .header h1 {
      font-size: 1.75rem;
      margin-bottom: 10px;
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.25rem;
        margin-bottom: 5px;
      }
    }

    .header p {
      opacity: 0.9;
      font-size: 0.875rem;
    }

    @media (max-width: 768px) {
      .header p {
        font-size: 0.75rem;
      }
    }

    .content {
      padding: 30px;
    }

    @media (max-width: 768px) {
      .content {
        padding: 10px;
      }
    }

    .section {
      margin-bottom: 30px;
    }

    @media (max-width: 768px) {
      .section {
        margin-bottom: 15px;
      }
    }

    .section-title {
      font-size: 1.125rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #667eea;
    }

    @media (max-width: 768px) {
      .section-title {
        font-size: 1rem;
        margin-bottom: 10px;
        padding-bottom: 5px;
      }
    }

    .info-box {
      background: #e7f3ff;
      border-left: 4px solid #4A90E2;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }

    @media (max-width: 768px) {
      .info-box {
        padding: 10px;
        margin-bottom: 10px;
        border-left-width: 3px;
      }
    }

    .info-box h3 {
      font-size: 0.875rem;
      color: #2c5aa0;
      margin-bottom: 8px;
    }

    @media (max-width: 768px) {
      .info-box h3 {
        font-size: 0.8125rem;
      }
    }

    .info-box p {
      font-size: 0.8125rem;
      color: #555;
      line-height: 1.5;
    }

    @media (max-width: 768px) {
      .info-box p {
        font-size: 0.75rem;
        line-height: 1.4;
      }
    }

    .info-box ul {
      margin: 10px 0 0 20px;
      font-size: 0.8125rem;
      color: #555;
    }

    @media (max-width: 768px) {
      .info-box ul {
        font-size: 0.75rem;
        margin-left: 15px;
      }
    }

    .info-box li {
      margin-bottom: 5px;
    }

    .translator-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      font-size: 0.8125rem;
    }

    @media (max-width: 768px) {
      .translator-table {
        font-size: 0.6875rem;
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .translator-table thead,
      .translator-table tbody,
      .translator-table tr {
        display: table;
        width: 100%;
        table-layout: fixed;
      }
    }

    .translator-table th {
      background: #f8f9fa;
      padding: 12px 8px;
      text-align: left;
      font-weight: 600;
      color: #333;
      border-bottom: 2px solid #dee2e6;
    }

    @media (max-width: 768px) {
      .translator-table th {
        padding: 6px 4px;
      }
    }

    .translator-table td {
      padding: 10px 8px;
      border-bottom: 1px solid #dee2e6;
    }

    @media (max-width: 768px) {
      .translator-table td {
        padding: 6px 4px;
      }
    }

    .translator-table tr:hover {
      background: #f8f9fa;
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.6875rem;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .badge {
        padding: 2px 5px;
        font-size: 0.625rem;
      }
    }

    .badge-offline {
      background: #d4edda;
      color: #155724;
    }

    .badge-api {
      background: #fff3cd;
      color: #856404;
    }

    .badge-new {
      background: #007bff;
      color: white;
    }

    .code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.75rem;
      color: #e83e8c;
      word-break: break-all;
    }

    @media (max-width: 768px) {
      .code {
        font-size: 0.6875rem;
        padding: 2px 4px;
      }
    }

    .setup-steps {
      background: #fff9e6;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }

    @media (max-width: 768px) {
      .setup-steps {
        padding: 10px;
        margin: 10px 0;
      }
    }

    .setup-steps h4 {
      color: #856404;
      margin-bottom: 10px;
      font-size: 0.875rem;
    }

    @media (max-width: 768px) {
      .setup-steps h4 {
        font-size: 0.8125rem;
      }
    }

    .setup-steps ol {
      margin-left: 20px;
      color: #666;
      font-size: 0.8125rem;
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .setup-steps ol {
        font-size: 0.75rem;
        margin-left: 15px;
        line-height: 1.5;
      }
    }

    .command-box {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 0.75rem;
      overflow-x: auto;
      margin: 10px 0;
      -webkit-overflow-scrolling: touch;
    }

    @media (max-width: 768px) {
      .command-box {
        padding: 8px;
        font-size: 0.6875rem;
      }
    }

    .command-box code {
      color: #a6e22e;
    }

    .warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
      color: #856404;
      padding: 12px;
      border-radius: 4px;
      margin: 15px 0;
      font-size: 0.8125rem;
    }

    @media (max-width: 768px) {
      .warning {
        padding: 8px;
        font-size: 0.75rem;
      }
    }

    .footer {
      background: #f8f9fa;
      padding: 20px 30px;
      text-align: center;
      color: #666;
      font-size: 0.8125rem;
    }

    @media (max-width: 768px) {
      .footer {
        padding: 15px 10px;
        font-size: 0.75rem;
        line-height: 1.5;
      }
    }

    .footer a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    .api-setup {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      padding: 15px;
      margin: 10px 0;
    }

    @media (max-width: 768px) {
      .api-setup {
        padding: 8px;
      }
    }

    .api-setup h4 {
      color: #495057;
      margin-bottom: 10px;
      font-size: 0.875rem;
    }

    @media (max-width: 768px) {
      .api-setup h4 {
        font-size: 0.8125rem;
      }
    }

    .api-setup ol {
      margin-left: 20px;
      font-size: 0.8125rem;
    }

    @media (max-width: 768px) {
      .api-setup ol {
        margin-left: 15px;
        font-size: 0.75rem;
      }
    }

    .env-var {
      background: #e9ecef;
      padding: 4px 8px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.6875rem;
      color: #495057;
      word-break: break-all;
    }

    @media (max-width: 768px) {
      .env-var {
        font-size: 0.625rem;
        padding: 2px 5px;
      }
    }
  </style>
</head>
<body>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üåê Comic Translator</h1>
      <p>Configuration Guide & Translator Reference</p>
    </div>
    
    <div class="content">
      <div class="section">
        <div class="section-title">üìã How to Use</div>
        <div class="info-box">
          <h3>Three Ways to Translate Images:</h3>
          <ul>
            <li><strong>Right-click:</strong> Right-click on any manga image and select "Translate Manga Image"</li>
            <li><strong>Hover button:</strong> Hover over large images to see a translate button (üåê)</li>
            <li><strong>Keyboard shortcut:</strong> Hover over an image and press <strong>Alt+T</strong></li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">‚öôÔ∏è Backend Setup</div>
        <div class="setup-steps">
          <h4>Step 1: Install manga-image-translator</h4>
          <ol>
            <li>Make sure you have Python 3.10+ installed</li>
            <li>Clone the repository and install dependencies</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code>git clone https://github.com/zyddnys/manga-image-translator.git</code><br>
          <code>cd manga-image-translator</code><br>
          <code>pip install -r requirements.txt</code>
        </div>
        
        <div class="setup-steps">
          <h4>Step 2: Start the Web Server</h4>
          <ol>
            <li>Navigate to server directory:</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code>cd server</code><br>
          <code>python main.py --use-gpu</code>
        </div>
        
        <div class="warning">
          ‚ö†Ô∏è <strong>Note:</strong> Models will be automatically downloaded on first use (~several GB). Make sure you have enough disk space.
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üåê Translator Reference</div>
        
        <div class="info-box">
          <h3>Offline Translators (Recommended for Privacy)</h3>
          <p>These translators work completely offline and don't require API keys. They're perfect for privacy-conscious users and work without internet connection once models are downloaded.</p>
        </div>
        
        <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Best For</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>offline</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Auto-select best offline translator</td>
              <td>Automatically chooses based on language pair</td>
            </tr>
            <tr>
              <td><strong>sugoi</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese ‚Üí English</td>
              <td>Sugoi V4.0 model, excellent quality</td>
            </tr>
            <tr>
              <td><strong>nllb / nllb_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multi-language support</td>
              <td>Supports 200+ languages</td>
            </tr>
            <tr>
              <td><strong>jparacrawl / jparacrawl_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese translation</td>
              <td>Specialized for Japanese</td>
            </tr>
            <tr>
              <td><strong>m2m100 / m2m100_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multilingual translation</td>
              <td>Many-to-many translation model</td>
            </tr>
            <tr>
              <td><strong>mbart50</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>50 languages</td>
              <td>Good for diverse language pairs</td>
            </tr>
            <tr>
              <td><strong>qwen2 / qwen2_big</strong> <span class="badge badge-new">NEW</span></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>High-quality translation</td>
              <td>Latest Qwen model with improved accuracy</td>
            </tr>
          </tbody>
        </table>
        
        <div class="info-box" style="margin-top: 30px;">
          <h3>Online Translators (API Key Required)</h3>
          <p>These translators require API keys and internet connection but often provide higher quality translations, especially for complex sentences and context-aware translations.</p>
        </div>
        
                <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Best For</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>offline</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Auto-select best offline translator</td>
              <td>Automatically chooses based on language pair</td>
            </tr>
            <tr>
              <td><strong>sugoi</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese ‚Üí English</td>
              <td>Sugoi V4.0 model, excellent quality</td>
            </tr>
            <tr>
              <td><strong>nllb / nllb_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multi-language support</td>
              <td>Supports 200+ languages</td>
            </tr>
            <tr>
              <td><strong>jparacrawl / jparacrawl_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese translation</td>
              <td>Specialized for Japanese</td>
            </tr>
            <tr>
              <td><strong>m2m100 / m2m100_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multilingual translation</td>
              <td>Many-to-many translation model</td>
            </tr>
            <tr>
              <td><strong>mbart50</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>50 languages</td>
              <td>Good for diverse language pairs</td>
            </tr>
            <tr>
              <td><strong>qwen2 / qwen2_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>High-quality translation</td>
              <td>Latest Qwen model with improved accuracy</td>
            </tr>
          </tbody>
        </table>
        
        <div class="info-box" style="margin-top: 30px;">
          <h3>Online Translators (API Key Required)</h3>
          <p>These translators require API keys and internet connection but often provide higher quality translations, especially for complex sentences and context-aware translations.</p>
        </div>
        
        <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Environment Variable</th>
              <th>Setup</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>chatgpt</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">OPENAI_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>OpenAI API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://platform.openai.com" target="_blank">OpenAI Platform</a></li>
                    <li>Create an account and generate API key</li>
                    <li>Add to .env file: <code>OPENAI_API_KEY=sk-your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>custom_openai</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">OPENAI_API_KEY</span>, <span class="env-var">OPENAI_API_BASE</span>, <span class="env-var">OPENAI_MODEL</span></td>
              <td>
                <div class="api-setup">
                  <h4>Custom OpenAI API Setup:</h4>
                  <ol>
                    <li>For custom OpenAI-compatible endpoints</li>
                    <li>Set API base URL, model, and key</li>
                    <li>Add to .env file:
                      <br><code>OPENAI_API_BASE=https://your-custom-endpoint</code>
                      <br><code>OPENAI_MODEL=your-model-name</code>
                      <br><code>OPENAI_API_KEY=your-api-key</code>
                    </li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>deepl</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">DEEPL_AUTH_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>DeepL API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://www.deepl.com/pro-api" target="_blank">DeepL API</a></li>
                    <li>Sign up for DeepL Pro plan</li>
                    <li>Get your authentication key</li>
                    <li>Add to .env file: <code>DEEPL_AUTH_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>gemini</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">GEMINI_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Google Gemini API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                    <li>Create API key for Gemini</li>
                    <li>Add to .env file: <code>GEMINI_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>deepseek</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">DEEPSEEK_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>DeepSeek API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://platform.deepseek.com" target="_blank">DeepSeek Platform</a></li>
                    <li>Sign up and get API key</li>
                    <li>Add to .env file: <code>DEEPSEEK_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>groq</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">GROQ_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Groq API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://console.groq.com" target="_blank">Groq Console</a></li>
                    <li>Create account and get API key</li>
                    <li>Add to .env file: <code>GROQ_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>baidu</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">BAIDU_APP_ID</span>, <span class="env-var">BAIDU_SECRET_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Baidu Translate API Setup:</h4>
                  <ol>
                    <li>Visit Baidu Translate Open Platform</li>
                    <li>Register as developer</li>
                    <li>Create application to get App ID and Secret Key</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>youdao</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">YOUDAO_APP_KEY</span>, <span class="env-var">YOUDAO_SECRET_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Youdao API Setup:</h4>
                  <ol>
                    <li>Visit Youdao AI Open Platform</li>
                    <li>Register and create application</li>
                    <li>Get App Key and Secret Key</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>caiyun</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">CAIYUN_TOKEN</span></td>
              <td>
                <div class="api-setup">
                  <h4>Caiyun API Setup:</h4>
                  <ol>
                    <li>Visit Caiyun Translation API</li>
                    <li>Register and get API token</li>
                    <li>Add to .env file: <code>CAIYUN_TOKEN=your-token-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>papago</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">NAVER_CLIENT_ID</span>, <span class="env-var">NAVER_CLIENT_SECRET</span></td>
              <td>
                <div class="api-setup">
                  <h4>Papago (Naver) API Setup:</h4>
                  <ol>
                    <li>Visit Naver Developers Platform</li>
                    <li>Register application for Papago API</li>
                    <li>Get Client ID and Client Secret</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>sakura</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">SAKURA_API_URL</span>, <span class="env-var">SAKURA_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Sakura API Setup:</h4>
                  <ol>
                    <li>For Japanese translation services</li>
                    <li>Set custom Sakura API endpoint and key</li>
                    <li>Add to .env file:
                      <br><code>SAKURA_API_URL=https://your-sakura-endpoint</code>
                      <br><code>SAKURA_API_KEY=your-api-key</code>
                    </li>
                  </ol>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        
        <div class="setup-steps" style="margin-top: 20px;">
          <h4>Setting Up Environment Variables</h4>
          <ol>
            <li>Create a <span class="code">.env</span> file in the manga-image-translator root directory</li>
            <li>Add your API keys in the format shown below</li>
            <li>Restart the server after making changes</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code># OpenAI (ChatGPT)</code><br>
          <code>OPENAI_API_KEY=sk-your-openai-key-here</code><br><br>
          <code># Custom OpenAI</code><br>
          <code>OPENAI_API_BASE=https://your-custom-endpoint</code><br>
          <code>OPENAI_MODEL=your-model-name</code><br>
          <code>OPENAI_API_KEY=your-api-key</code><br><br>
          <code># DeepL</code><br>
          <code>DEEPL_AUTH_KEY=your-deepl-key-here</code><br><br>
          <code># Google Gemini</code><br>
          <code>GEMINI_API_KEY=your-gemini-key-here</code><br><br>
          <code># DeepSeek</code><br>
          <code>DEEPSEEK_API_KEY=your-deepseek-key-here</code><br><br>
          <code># Groq</code><br>
          <code>GROQ_API_KEY=your-groq-key-here</code><br><br>
          <code># Baidu (need both)</code><br>
          <code>BAIDU_APP_ID=your-app-id</code><br>
          <code>BAIDU_SECRET_KEY=your-secret-key</code><br><br>
          <code># Youdao (need both)</code><br>
          <code>YOUDAO_APP_KEY=your-app-key</code><br>
          <code>YOUDAO_SECRET_KEY=your-secret-key</code><br><br>
          <code># Caiyun</code><br>
          <code>CAIYUN_TOKEN=your-token-here</code><br><br>
          <code># Papago/Naver (need both)</code><br>
          <code>NAVER_CLIENT_ID=your-client-id</code><br>
          <code>NAVER_CLIENT_SECRET=your-client-secret</code><br><br>
          <code># Sakura (need both)</code><br>
          <code>SAKURA_API_URL=https://your-sakura-endpoint</code><br>
          <code>SAKURA_API_KEY=your-api-key</code>
        </div>
        
        <div class="warning">
          üí° <strong>Tip:</strong> You can add multiple API keys to the .env file. The translator will automatically use the available ones. Start with offline translators for privacy, then add online translators for better quality when needed.
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üé® Display Settings</div>
        
        <div class="info-box">
          <h3>Text Rendering Options</h3>
          <p>The extension supports multiple display modes and text rendering options. For best results with manga/comic images, use the recommended settings below.</p>
        </div>
        
        <div class="info-box">
          <h3>Font Size Control</h3>
          <ul>
            <li><strong>Automatic:</strong> The <code>manga2eng</code> renderer (default) automatically adjusts text size to fit speech bubbles</li>
            <li><strong>Manual:</strong> Use Font Size Offset setting in popup to fine-tune (-10 to +10 pixels)</li>
            <li><strong>Recommendation:</strong> Start with automatic, then use manual offset if text still doesn't fit well</li>
          </ul>
        </div>
        
        <div class="info-box">
          <h3>Text Detector Options</h3>
          <ul>
            <li><strong>default:</strong> Best overall performance for most manga</li>
            <li><strong>ctd:</strong> Can detect more text lines (experimental)</li>
            <li><strong>craft:</strong> Good for general text (not recommended for manga)</li>
          </ul>
        </div>
        
        <div class="info-box">
          <h3>Inpainter Options</h3>
          <ul>
            <li><strong>lama_large:</strong> Best quality for removing text (recommended)</li>
            <li><strong>lama_mpe:</strong> Faster alternative</li>
            <li><strong>sd:</strong> Stable Diffusion based (slow but high quality)</li>
          </ul>
        </div>
        
        <div class="info-box">
          <h3>Renderer Options</h3>
          <ul>
            <li><strong>manga2eng:</strong> Better for fitting English text in bubbles (recommended)</li>
            <li><strong>default:</strong> Standard text rendering</li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">‚ö° Performance & Memory</div>
        
        <div class="info-box">
          <h3>Memory Management</h3>
          <p>The extension includes automatic memory management to handle GPU out-of-memory errors:</p>
          <ul>
            <li><strong>Auto-reduce:</strong> Automatically reduces inpainting size on OOM errors</li>
            <li><strong>Manual control:</strong> Adjust inpainting size in settings (512px to 2048px)</li>
            <li><strong>Recommendation:</strong> Start with 2048px, reduce if you encounter OOM errors</li>
          </ul>
        </div>
        
        <div class="info-box">
          <h3>Cache System</h3>
          <ul>
            <li><strong>Translation Cache:</strong> Stores up to 100 translated images locally</li>
            <li><strong>Automatic:</strong> Automatically applies cached translations when available</li>
            <li><strong>Manual:</strong> Clear cache through popup settings if needed</li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üîß Advanced Configuration</div>
        
        <div class="info-box">
          <h3>Configuration File</h3>
          <p>You can also create a <code>config.json</code> file in the manga-image-translator directory for persistent settings:</p>
        </div>
        
        <div class="command-box">
          <code>{</code><br>
          <code>  "translator": "sugoi",</code><br>
          <code>  "target_lang": "ENG",</code><br>
          <code>  "detector": "default",</code><br>
          <code>  "inpainter": "lama_large",</code><br>
          <code>  "renderer": "manga2eng",</code><br>
          <code>  "inpainting_size": 2048,</code><br>
          <code>  "font_size_offset": 0</code><br>
          <code>}</code>
        </div>
        
        <div class="warning">
          ‚ö†Ô∏è <strong>Note:</strong> Settings in the extension popup override config.json values. Use config.json for default values that can be overridden by the extension UI.
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>
        Backend: <a href="https://github.com/zyddnys/manga-image-translator" target="_blank">manga-image-translator</a> by zyddnys<br>
        Extension: Comic Image Translator for Firefox<br>
        For more information, visit the <a href="https://github.com/zyddnys/manga-image-translator" target="_blank">official repository</a><br>
      </p>
    </div>

    <script>
      // Check if we're on mobile and show floating button
      async function checkAndShowFloatingButton() {
        try {
          const currentWindow = await browser.windows.getCurrent();
          
          if (currentWindow.type === 'normal') {
            // We're in mobile/tablet mode
            const floatingBtn = document.getElementById('floatingBackBtn');
            floatingBtn.style.display = 'flex';
          }
        } catch (error) {
          // Fallback: check window width
          if (window.innerWidth <= 768) {
            const floatingBtn = document.getElementById('floatingBackBtn');
            floatingBtn.style.display = 'flex';
          }
        }
      }
      
      // Back button handler for both footer link and floating button
      async function handleBackClick(e) {
        e.preventDefault();
        
        try {
          const currentWindow = await browser.windows.getCurrent();
          
          if (currentWindow.type === 'popup') {
            // Desktop: try to open popup and close this tab
            const popupUrl = browser.runtime.getURL('popup.html');
            try {
              await browser.windows.create({
                url: popupUrl,
                type: 'popup',
                width: 350,
                height: 600
              });
              window.close();
            } catch (popupError) {
              console.log('Cannot open popup, navigating to popup page');
              window.location.href = popupUrl;
            }
          } else {
            // Mobile: replace current page with popup
            const popupUrl = browser.runtime.getURL('popup.html');
            window.location.href = popupUrl;
          }
        } catch (error) {
          // Fallback: try to go back or navigate to popup
          if (window.history.length > 1) {
            window.history.back();
          } else {
            const popupUrl = browser.runtime.getURL('popup.html');
            window.location.href = popupUrl;
          }
        }
      }
      
      // Add event listeners
      document.addEventListener('DOMContentLoaded', function() {
        checkAndShowFloatingButton();
        
        // Floating back button
        const floatingBackBtn = document.getElementById('floatingBackBtn');
        if (floatingBackBtn) {
          floatingBackBtn.addEventListener('click', handleBackClick);
        }
      });
    </script>
  </div>
</body>
</html>