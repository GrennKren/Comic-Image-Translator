<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>üåê Comic Translator - Configuration Guide & Translator Reference</title>
  <link rel="stylesheet" href="style.css"> <!-- Reuse popup.css for styling -->
  <script src="browser-polyfill.js"></script>
  <script src="configuration.js"></script>
</head>
<body>
  <div class="container">
    <div class="header-config">
      <h1>üåê Comic Translator</h1>
      <p>Configuration Guide & Translator Reference</p>
    </div>
    
    <div class="content-config">
      <div class="section">
        <div class="section-title">üìã How to Use</div>
        <div class="info-box-config">
          <h3>Three Ways to Translate Images:</h3>
          <ul>
            <li><strong>Right-click:</strong> Right-click on any comic image and select "Translate Image"</li>
            <li><strong>Hover button:</strong> Hover over large images to see a translate button (üåê)</li>
            <li><strong>Keyboard shortcut:</strong> Hover over an image and press <strong>Alt+T</strong></li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">‚öôÔ∏è Backend Setup</div>
        <div class="setup-steps">
          <h4>Step 1: Install manga-image-translator</h4>
          <ol>
            <li>Make sure you have Python 3.10+ installed</li>
            <li>Clone the repository and install dependencies</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code>git clone https://github.com/zyddnys/manga-image-translator.git</code><br>
          <code>cd manga-image-translator</code><br>
          <code>pip install -r requirements.txt</code>
        </div>
        
        <div class="setup-steps">
          <h4>Step 2: Start the Web Server</h4>
          <ol>
            <li>Navigate to server directory:</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code>cd server</code><br>
          <code>python main.py --use-gpu</code>
        </div>
        
        <div class="warning">
          ‚ö†Ô∏è <strong>Note:</strong> Models will be automatically downloaded on first use (~several GB). Make sure you have enough disk space.
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üåê Translator Reference</div>
        
        <div class="info-box-config">
          <h3>Offline Translators (Recommended for Privacy)</h3>
          <p>These translators work completely offline and don't require API keys. They're perfect for privacy-conscious users and work without internet connection once models are downloaded.</p>
        </div>
        
        <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Best For</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>offline</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Auto-select best offline translator</td>
              <td>Automatically chooses based on language pair</td>
            </tr>
            <tr>
              <td><strong>sugoi</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese ‚Üí English</td>
              <td>Sugoi V4.0 model, excellent quality</td>
            </tr>
            <tr>
              <td><strong>nllb / nllb_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multi-language support</td>
              <td>Supports 200+ languages</td>
            </tr>
            <tr>
              <td><strong>jparacrawl / jparacrawl_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese translation</td>
              <td>Specialized for Japanese</td>
            </tr>
            <tr>
              <td><strong>m2m100 / m2m100_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multilingual translation</td>
              <td>Many-to-many translation model</td>
            </tr>
            <tr>
              <td><strong>mbart50</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>50 languages</td>
              <td>Good for diverse language pairs</td>
            </tr>
            <tr>
              <td><strong>qwen2 / qwen2_big</strong> <span class="badge badge-new">NEW</span></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>High-quality translation</td>
              <td>Latest Qwen model with improved accuracy</td>
            </tr>
          </tbody>
        </table>
        
        <div class="info-box-config" style="margin-top: 30px;">
          <h3>Online Translators (API Key Required)</h3>
          <p>These translators require API keys and internet connection but often provide higher quality translations, especially for complex sentences and context-aware translations.</p>
        </div>
        
                <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Best For</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>offline</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Auto-select best offline translator</td>
              <td>Automatically chooses based on language pair</td>
            </tr>
            <tr>
              <td><strong>sugoi</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese ‚Üí English</td>
              <td>Sugoi V4.0 model, excellent quality</td>
            </tr>
            <tr>
              <td><strong>nllb / nllb_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multi-language support</td>
              <td>Supports 200+ languages</td>
            </tr>
            <tr>
              <td><strong>jparacrawl / jparacrawl_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Japanese translation</td>
              <td>Specialized for Japanese</td>
            </tr>
            <tr>
              <td><strong>m2m100 / m2m100_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>Multilingual translation</td>
              <td>Many-to-many translation model</td>
            </tr>
            <tr>
              <td><strong>mbart50</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>50 languages</td>
              <td>Good for diverse language pairs</td>
            </tr>
            <tr>
              <td><strong>qwen2 / qwen2_big</strong></td>
              <td><span class="badge badge-offline">Offline</span></td>
              <td>High-quality translation</td>
              <td>Latest Qwen model with improved accuracy</td>
            </tr>
          </tbody>
        </table>
        
        <div class="info-box-config" style="margin-top: 30px;">
          <h3>Online Translators (API Key Required)</h3>
          <p>These translators require API keys and internet connection but often provide higher quality translations, especially for complex sentences and context-aware translations.</p>
        </div>
        
        <table class="translator-table">
          <thead>
            <tr>
              <th>Translator</th>
              <th>Type</th>
              <th>Environment Variable</th>
              <th>Setup</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>chatgpt</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">OPENAI_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>OpenAI API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://platform.openai.com" target="_blank">OpenAI Platform</a></li>
                    <li>Create an account and generate API key</li>
                    <li>Add to .env file: <code>OPENAI_API_KEY=sk-your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>custom_openai</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">OPENAI_API_KEY</span>, <span class="env-var">OPENAI_API_BASE</span>, <span class="env-var">OPENAI_MODEL</span></td>
              <td>
                <div class="api-setup">
                  <h4>Custom OpenAI API Setup:</h4>
                  <ol>
                    <li>For custom OpenAI-compatible endpoints</li>
                    <li>Set API base URL, model, and key</li>
                    <li>Add to .env file:
                      <br><code>OPENAI_API_BASE=https://your-custom-endpoint</code>
                      <br><code>OPENAI_MODEL=your-model-name</code>
                      <br><code>OPENAI_API_KEY=your-api-key</code>
                    </li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>deepl</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">DEEPL_AUTH_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>DeepL API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://www.deepl.com/pro-api" target="_blank">DeepL API</a></li>
                    <li>Sign up for DeepL Pro plan</li>
                    <li>Get your authentication key</li>
                    <li>Add to .env file: <code>DEEPL_AUTH_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>gemini</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">GEMINI_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Google Gemini API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                    <li>Create API key for Gemini</li>
                    <li>Add to .env file: <code>GEMINI_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>deepseek</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">DEEPSEEK_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>DeepSeek API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://platform.deepseek.com" target="_blank">DeepSeek Platform</a></li>
                    <li>Sign up and get API key</li>
                    <li>Add to .env file: <code>DEEPSEEK_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>groq</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">GROQ_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Groq API Setup:</h4>
                  <ol>
                    <li>Visit <a href="https://console.groq.com" target="_blank">Groq Console</a></li>
                    <li>Create account and get API key</li>
                    <li>Add to .env file: <code>GROQ_API_KEY=your-key-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>baidu</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">BAIDU_APP_ID</span>, <span class="env-var">BAIDU_SECRET_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Baidu Translate API Setup:</h4>
                  <ol>
                    <li>Visit Baidu Translate Open Platform</li>
                    <li>Register as developer</li>
                    <li>Create application to get App ID and Secret Key</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>youdao</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">YOUDAO_APP_KEY</span>, <span class="env-var">YOUDAO_SECRET_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Youdao API Setup:</h4>
                  <ol>
                    <li>Visit Youdao AI Open Platform</li>
                    <li>Register and create application</li>
                    <li>Get App Key and Secret Key</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>caiyun</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">CAIYUN_TOKEN</span></td>
              <td>
                <div class="api-setup">
                  <h4>Caiyun API Setup:</h4>
                  <ol>
                    <li>Visit Caiyun Translation API</li>
                    <li>Register and get API token</li>
                    <li>Add to .env file: <code>CAIYUN_TOKEN=your-token-here</code></li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>papago</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">NAVER_CLIENT_ID</span>, <span class="env-var">NAVER_CLIENT_SECRET</span></td>
              <td>
                <div class="api-setup">
                  <h4>Papago (Naver) API Setup:</h4>
                  <ol>
                    <li>Visit Naver Developers Platform</li>
                    <li>Register application for Papago API</li>
                    <li>Get Client ID and Client Secret</li>
                    <li>Add both to .env file</li>
                  </ol>
                </div>
              </td>
            </tr>
            <tr>
              <td><strong>sakura</strong></td>
              <td><span class="badge badge-api">API</span></td>
              <td><span class="env-var">SAKURA_API_URL</span>, <span class="env-var">SAKURA_API_KEY</span></td>
              <td>
                <div class="api-setup">
                  <h4>Sakura API Setup:</h4>
                  <ol>
                    <li>For Japanese translation services</li>
                    <li>Set custom Sakura API endpoint and key</li>
                    <li>Add to .env file:
                      <br><code>SAKURA_API_URL=https://your-sakura-endpoint</code>
                      <br><code>SAKURA_API_KEY=your-api-key</code>
                    </li>
                  </ol>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        
        <div class="setup-steps" style="margin-top: 20px;">
          <h4>Setting Up Environment Variables</h4>
          <ol>
            <li>Create a <span class="code">.env</span> file in the manga-image-translator root directory</li>
            <li>Add your API keys in the format shown below</li>
            <li>Restart the server after making changes</li>
          </ol>
        </div>
        
        <div class="command-box">
          <code># OpenAI (ChatGPT)</code><br>
          <code>OPENAI_API_KEY=sk-your-openai-key-here</code><br><br>
          <code># Custom OpenAI</code><br>
          <code>OPENAI_API_BASE=https://your-custom-endpoint</code><br>
          <code>OPENAI_MODEL=your-model-name</code><br>
          <code>OPENAI_API_KEY=your-api-key</code><br><br>
          <code># DeepL</code><br>
          <code>DEEPL_AUTH_KEY=your-deepl-key-here</code><br><br>
          <code># Google Gemini</code><br>
          <code>GEMINI_API_KEY=your-gemini-key-here</code><br><br>
          <code># DeepSeek</code><br>
          <code>DEEPSEEK_API_KEY=your-deepseek-key-here</code><br><br>
          <code># Groq</code><br>
          <code>GROQ_API_KEY=your-groq-key-here</code><br><br>
          <code># Baidu (need both)</code><br>
          <code>BAIDU_APP_ID=your-app-id</code><br>
          <code>BAIDU_SECRET_KEY=your-secret-key</code><br><br>
          <code># Youdao (need both)</code><br>
          <code>YOUDAO_APP_KEY=your-app-key</code><br>
          <code>YOUDAO_SECRET_KEY=your-secret-key</code><br><br>
          <code># Caiyun</code><br>
          <code>CAIYUN_TOKEN=your-token-here</code><br><br>
          <code># Papago/Naver (need both)</code><br>
          <code>NAVER_CLIENT_ID=your-client-id</code><br>
          <code>NAVER_CLIENT_SECRET=your-client-secret</code><br><br>
          <code># Sakura (need both)</code><br>
          <code>SAKURA_API_URL=https://your-sakura-endpoint</code><br>
          <code>SAKURA_API_KEY=your-api-key</code>
        </div>
        
        <div class="warning">
          üí° <strong>Tip:</strong> You can add multiple API keys to the .env file. The translator will automatically use the available ones. Start with offline translators for privacy, then add online translators for better quality when needed.
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üé® Display Settings</div>
        
        <div class="info-box-config">
          <h3>Text Rendering Options</h3>
          <p>The extension supports multiple display modes and text rendering options. For best results with manga/comic images, use the recommended settings below.</p>
        </div>
        
        <div class="info-box-config">
          <h3>Font Size Control</h3>
          <ul>
            <li><strong>Automatic:</strong> The <code>manga2eng</code> renderer (default) automatically adjusts text size to fit speech bubbles</li>
            <li><strong>Manual:</strong> Use Font Size Offset setting in popup to fine-tune (-10 to +10 pixels)</li>
            <li><strong>Recommendation:</strong> Start with automatic, then use manual offset if text still doesn't fit well</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Text Detector Options</h3>
          <ul>
            <li><strong>default:</strong> Best overall performance for most manga</li>
            <li><strong>ctd:</strong> Can detect more text lines (experimental)</li>
            <li><strong>craft:</strong> Good for general text (not recommended for manga)</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Inpainter Options</h3>
          <ul>
            <li><strong>lama_large:</strong> Best quality for removing text (recommended)</li>
            <li><strong>lama_mpe:</strong> Faster alternative</li>
            <li><strong>sd:</strong> Stable Diffusion based (slow but high quality)</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Renderer Options</h3>
          <ul>
            <li><strong>manga2eng:</strong> Better for fitting English text in bubbles (recommended)</li>
            <li><strong>default:</strong> Standard text rendering</li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">‚ö° Performance & Memory</div>
        
        <div class="info-box-config">
          <h3>Memory Management</h3>
          <p>The extension includes automatic memory management to handle GPU out-of-memory errors:</p>
          <ul>
            <li><strong>Auto-reduce:</strong> Automatically reduces inpainting size on OOM errors</li>
            <li><strong>Manual control:</strong> Adjust inpainting size in settings (512px to 2048px)</li>
            <li><strong>Recommendation:</strong> Start with 2048px, reduce if you encounter OOM errors</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Cache System</h3>
          <ul>
            <li><strong>Translation Cache:</strong> Stores up to 100 translated images locally</li>
            <li><strong>Automatic:</strong> Automatically applies cached translations when available</li>
            <li><strong>Manual:</strong> Clear cache through popup settings if needed</li>
          </ul>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">üîß Advanced Configuration</div>
        
        <div class="info-box-config">
          <h3>Configuration File</h3>
          <p>You can also create a <code>config.json</code> file in the manga-image-translator directory for persistent settings:</p>
        </div>
        
        <div class="command-box">
          <code>{</code><br>
          <code>  "translator": "sugoi",</code><br>
          <code>  "target_lang": "ENG",</code><br>
          <code>  "detector": "default",</code><br>
          <code>  "inpainter": "lama_large",</code><br>
          <code>  "renderer": "manga2eng",</code><br>
          <code>  "inpainting_size": 2048,</code><br>
          <code>  "font_size_offset": 0</code><br>
          <code>}</code>
        </div>
        
        <div class="warning">
          ‚ö†Ô∏è <strong>Note:</strong> Settings in the extension popup override config.json values. Use config.json for default values that can be overridden by the extension UI.
        </div>
      </div>

      <div class="section">
        <div class="section-title">üìö Batch Translation</div>
        
        <div class="info-box-config">
          <h3>Translate All Images</h3>
          <p>The extension now supports batch translation of multiple images at once:</p>
          <ul>
            <li><strong>Desktop:</strong> Right-click on any page and select "Translate All Images"</li>
            <li><strong>Mobile:</strong> Long-press on any image and select "Translate All Images"</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Webtoon Support</h3>
          <p>Special handling for webtoon-style horizontal scrolling content:</p>
          <ul>
            <li><strong>Dynamic Loading:</strong> Images are translated as they load, no need to wait for all images</li>
            <li><strong>Progress Tracking:</strong> Real-time progress indicator shows "Translating X/Y pages"</li>
            <li><strong>Smart Processing:</strong> Automatically detects webtoon-style content and adjusts processing accordingly</li>
          </ul>
        </div>
        
        <div class="info-box-config">
          <h3>Batch Processing</h3>
          <p>How batch translation works:</p>
          <ul>
            <li><strong>Selector Based:</strong> Only images matching your configured selectors will be translated</li>
            <li><strong>Memory Efficient:</strong> Processes images in small batches (4 images at a time)</li>
            <li><strong>Error Resilient:</strong> If one image fails, others continue processing</li>
            <li><strong>Cache Aware:</strong> Uses cached translations when available</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>
        Backend: <a href="https://github.com/zyddnys/manga-image-translator" target="_blank">manga-image-translator</a> by zyddnys<br>
        Extension: Comic Image Translator for Firefox<br>
        For more information, visit the <a href="https://github.com/zyddnys/manga-image-translator" target="_blank">official repository</a><br>
      </p>
    </div>

    
  </div>
</body>
</html>